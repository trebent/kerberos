# Kerberos

[![Static analysis](https://github.com/trebent/kerberos/actions/workflows/build.yaml/badge.svg)](https://github.com/trebent/kerberos/actions/workflows/static-analysis.yaml)
[![Test](https://github.com/trebent/kerberos/actions/workflows/build.yaml/badge.svg)](https://github.com/trebent/kerberos/actions/workflows/test.yaml)
[![Build](https://github.com/trebent/kerberos/actions/workflows/build.yaml/badge.svg)](https://github.com/trebent/kerberos/actions/workflows/build.yaml)
[![License](https://img.shields.io/badge/License-BSD_3--Clause-blue.svg)](https://opensource.org/licenses/BSD-3-Clause)
[![Go Report Card](https://goreportcard.com/badge/github.com/trebent/kerberos)](https://goreportcard.com/report/github.com/trebent/kerberos)

üê∂üê∂üê∂


## Observability

### Metrics

Kerberos produces the following request/response metrics:

* `request_count_total`
* `request_duration_milliseconds_bucket`
* `request_size_bytes_bucket`
* `response_size_bytes_bucket`
* `response_total`

All bucket types also have a `_sum` and `_total` variant.


#### Labelling

Request/response metrics are labelled with the backend they belong to, along with pertinent HTTP information that won't cause too large dimensions. In most cases this includes the HTTP method. The `response_total` metric additionally has the response code as a label added to it.


### Tracing

Kerberos will start a span once a request is received. This span may or may not have a parent span, depending on if the incoming request has a trace context set in its request headers. Spans are propagated to forwarded routes to allow backends to associate child spans with the parent trace generated by Kerberos or a higher level component.
